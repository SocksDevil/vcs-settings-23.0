package patches.projects

import jetbrains.buildServer.configs.kotlin.*
import jetbrains.buildServer.configs.kotlin.Project
import jetbrains.buildServer.configs.kotlin.projectFeatures.kubernetesConnection
import jetbrains.buildServer.configs.kotlin.ui.*

/*
This patch script was generated by TeamCity on settings change in UI.
To apply the patch, change the root project
accordingly, and delete the patch script.
*/
changeProject(DslContext.projectId) {
    params {
        add {
            param("test", "meow")
        }
    }

    features {
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_10"
                name = "EKS"
                apiServerUrl = "meow"
                namespace = "meow"
                authStrategy = eks {
                    accessId = "id"
                    secretKey = "credentialsJSON:3507800f-ae64-49f1-bbb5-0a4deec5c7b3"
                    clusterName = "cluster-name"
                }
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_11"
                name = "Username and Password"
                apiServerUrl = "meow"
                namespace = "meow"
                param("secure:password", "credentialsJSON:aaef5e7e-5a51-427c-b0ea-3af364cacedd")
                param("authStrategy", "user-passwd")
                param("username", "username")
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_12"
                name = "Default Service Account"
                apiServerUrl = "meow"
                namespace = "meow"
                param("authStrategy", "service-account")
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_13"
                name = "Open ID"
                apiServerUrl = "meow"
                namespace = "meow"
                param("secure:oidcRefreshToken", "credentialsJSON:0bb3f85a-7ff4-474e-9c14-8da47099595a")
                param("oidcClientId", "clientId")
                param("idpIssuerUrl", "idpurl")
                param("authStrategy", "oidc")
                param("secure:oidcClientSecret", "credentialsJSON:612f3414-2b25-41ec-9520-12c9669d1f85")
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_7"
                name = "Unauthorized"
                apiServerUrl = "meow"
                namespace = "meowmeow"
                authStrategy = unauthorized()
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_8"
                name = "Certificate & Key"
                apiServerUrl = "meow"
                namespace = "meow"
                param("secure:clientKeyData", "credentialsJSON:43b46ece-15a7-4621-a271-7d2b33e9e356")
                param("secure:clientCertData", "credentialsJSON:87a6537c-cb8f-4684-b44d-e0ea183e9fa1")
                param("authStrategy", "client-cert")
            }
        }
        add {
            kubernetesConnection {
                id = "PROJECT_EXT_9"
                name = "EKS with server instance profile"
                apiServerUrl = "meow"
                authStrategy = eks {
                    eksUseInstanceProfile = true
                    assumeIamRole = true
                    iamRoleArn = "arn"
                    clusterName = "cluster-name"
                }
            }
        }
    }
}
